---
import Lightbox from './lightbox.astro';

export interface Props {
  images: string[];
}

const { images } = Astro.props;

// Convert image paths to the format expected by import.meta.glob
const folderFiles = images.map(img => {
  // If path starts with /images/, add /public prefix
  if (img.startsWith('/images/')) {
    return `/public${img}`;
  }
  return img;
});

const galleryId = 'gallery-images'
  .replace(/[^A-Za-z0-9_-]/g, '-')
  .replace(/-+/g, '-')
  .replace(/^-|-$/g, '');
---

<div
  id={galleryId}
  class="not-prose mx-auto block w-full columns-1 gap-1 sm:columns-2 sm:gap-2 lg:columns-3"
  itemscope
  itemtype="http://schema.org/ImageGallery"
>
  <Lightbox id={galleryId} images={folderFiles} />
</div>
