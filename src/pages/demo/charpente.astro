---
import Layout from '~/layouts/PageLayout.astro';
import client from '../../../tina/__generated__/client';
import AccueilCategoryPage from '../../../tina/pages/AccueilCategoryPage';

// Fetch data from TinaCMS
const result = await client.queries.accueil_categories({
  relativePath: 'charpente.md',
});

const meta = {
  title: 'Demo Visual Editing - Charpente',
  description: 'Page de démonstration du visual editing TinaCMS',
};
---

<Layout {meta}>
  <div class="container mx-auto py-8">
    <div class="mb-6 text-center">
      <p class="text-sm text-gray-600">
        Mode Visual Editing: Éditez cette page directement depuis l'interface TinaCMS
      </p>
      <p class="text-xs text-gray-500 mt-2">
        URL Admin: <a href="/admin/index.html#/collections/accueil_categories/charpente.md" class="text-blue-600 underline">/admin</a>
      </p>
    </div>

    <AccueilCategoryPage
      data={result.data}
      query={result.query}
      variables={{ relativePath: 'charpente.md' }}
      client:tina
    />
  </div>
</Layout>
